<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>Les petits chefs</title>
	<link rel="stylesheet" type="text/css" href="lesPetitsChefs_main.css">
	<link rel="stylesheet" type="text/css" href="lesPetitsChefs_recettesByType.css">
	<script src="lesPetitsChefs_recettes.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  	<script src="lesPetitsChefs_utils.js"></script>
</head>
<body>
	<h1 class="titre">Appéritifs</h1>

	<img class="imgMenu" onclick="displayMenu()" src="burgerldpi.png"/>
	<div class="navbar">
		<img class="closeSidebar" onclick="displayMenu()" src="close_sidebar.png"/>
		<ul class="listeOnglet">
			<li><a href="lesPetitsChefs_recettesByType.html?type=apperitifs"><img src="apperitifs.png"></img></a></li>
			<li><a href="">entrée</a></li>
			<li><a href="">plat</a></li>
			<li><a href="lesPetitsChefs_recettesByType.html?type=desserts">déssert</a></li>
		</ul>
	</div>

	<div class="containerPrincipal">
		<input id="searchbarRecette" type="text" onkeyup="search()" placeholder="recherche"></input>
		<table class="listeRecette">
			<thead>
			   <tr class="ligne">
			       <th class="colonne">Nom</th>
			       <th class="colonne">Difficulté</th>
			       <th class="colonne">Temps de préparation</th>
			       <th class="colonne">Temps de cuisson</th>
			       <th class="colonne">Nombre de personne</th>
			       <th class="colonne">prix moyen</th>
			   </tr>
		   </thead>
		   <tbody class="tbody">
			   
		   </tbody>
		</table>
	</div>
	<script type="text/javascript">
		
		var url_String = window.location.href;
		var url = new URL(url_String);
		var type = url.searchParams.get("type");
		
		function search(){
			var text = (document.getElementById('searchbarRecette').value).toLowerCase();
			var recettes = {};
			switch(type){
				case "apperitifs":
					for(var nom in jsonRecettesApperitifs){
						if(nom.toLowerCase().includes(text)){
							recettes[nom] = jsonRecettesApperitifs[nom];
						}
					}
					break;
				case "desserts":
				for(var nom in jsonRecettesDesserts){
						if(nom.toLowerCase().includes(text)){
							recettes[nom] = jsonRecettesDesserts[nom];
						}
					}
					break;
			}

			$('.tbody').empty()
			addRecette(recettes);
		}

		function addRecette(json){
			var recettes = json
			var i = 0;
			for(var nom in recettes){
				var j = i%2;
				var recette = recettes[nom]
				var tr = 	"<tr class='ligne"+j+"'>"
								+"<td class='colonne'> <a href='lesPetitsChefs_recette.html?nom="+recette.nom+"&type="+type+"'>"+ recette.nom +"</a> </td>"
					       		+"<td class='colonne'> "+ recette.difficulte +" </td>"
					       		+"<td class='colonne'> "+ recette.prepa +" </td>"
					       		+"<td class='colonne'> "+ recette.cuisson +" </td>"
					       		+"<td class='colonne'> "+ recette.nbPersonne +" </td>"
					       		+"<td class='colonne'> "+ recette.prix +"</td>"
					       	+"</tr>"
				$(tr).appendTo($('.tbody'));
				i++;
			};
		};

		
		
		switch(type){
			case "apperitifs":
				addRecette(jsonRecettesApperitifs);
				break;
			case "desserts":
				addRecette(jsonRecettesDesserts)
				break;
		}

		

	</script>
</body>
</html>